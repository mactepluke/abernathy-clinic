"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[60],{1060:(E,d,n)=>{n.r(d),n.d(d,{NotePageComponent:()=>v});var l=n(6814),u=n(667),s=n(7452),_=n(9548),f=n(6611),i=n(6223),h=n(1075),m=n(9799),t=n(5879),g=n(1896),c=n(6005);let v=(()=>{class r{constructor(e,o,a,P,N){this.route=e,this.historyService=o,this.formBuilder=a,this.router=P,this.displayService=N}ngOnInit(){this.form=this.formBuilder.group({title:[null,[i.kI.required,i.kI.pattern("^.{1,100}$")]],content:[null,[i.kI.required,i.kI.pattern("^[\\s\\S]{1,8000}$")]]}),this.route.paramMap.subscribe(e=>{let o=e.get("id");"-1"!=o?this.historyService.findNote(o).subscribe(a=>{this.note=a}):this.note={id:"-1",patientId:e.get("patientId"),title:"Untitled",dateTime:new Date,content:""},this.reset()})}ngAfterViewInit(){this.reset()}onReset(){this.newNote=this.form.value,this.newNote.id=this.note.id,this.newNote.patientId=this.note.patientId,this.newNote.dateTime=new Date,this.historyService.equals(this.newNote,this.note)?(console.log("No fields changed"),this.displayService.openSnackBar("No fields changed")):(this.reset(),console.log("Fields reset to initial values"),this.displayService.openSnackBar("Fields reset to initial values"))}reset(){this.form.setValue({title:this.note.title,content:this.note.content})}onBack(){this.route.paramMap.subscribe(e=>{this.router.navigate(["mediscreen-abernathy/patient-record",e.get("family"),e.get("given")])})}onSave(){this.newNote=this.form.value,this.newNote.id=this.note.id,this.newNote.patientId=this.note.patientId,this.newNote.dateTime=new Date,this.historyService.equals(this.newNote,this.note)?(console.log("No fields changed"),this.displayService.openSnackBar("No fields changed")):"-1"===this.newNote.id?this.historyService.addNote(this.newNote).subscribe(e=>{this.note=e,this.reset(),console.log("Note created successfully"),this.displayService.openSnackBar("Note created successfully")}):this.historyService.updateNote(this.newNote).subscribe(e=>{this.note=e,this.reset(),console.log("Note updated successfully"),this.displayService.openSnackBar("Note updated successfully")})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(g.gz),t.Y36(u.q),t.Y36(i.qu),t.Y36(g.F0),t.Y36(m.G))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-note-page"]],standalone:!0,features:[t._Bn([u.q,i.qu,m.G]),t.jDz],decls:27,vars:9,consts:[[3,"formGroup"],[1,"contents"],[1,"formFields"],["matInput","","formControlName","title"],["rows","10","matInput","","formControlName","content",1,"text-style"],[1,"centered"],[1,"button-div"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),t._uU(3),t.ALo(4,"titlecase"),t.ALo(5,"date"),t.qZA()(),t.TgZ(6,"mat-card-content",1)(7,"mat-form-field",2)(8,"mat-label"),t._uU(9,"Title"),t.qZA(),t._UZ(10,"input",3),t.TgZ(11,"mat-hint"),t._uU(12,"(1-100 chars)"),t.qZA()(),t.TgZ(13,"mat-form-field",2)(14,"mat-label"),t._uU(15,"Content"),t.qZA(),t._UZ(16,"textarea",4),t.TgZ(17,"mat-hint"),t._uU(18,"(1-8000 chars)"),t.qZA()()(),t.TgZ(19,"mat-card-actions",5)(20,"div",6)(21,"button",7),t.NdJ("click",function(){return o.onBack()}),t._uU(22,"Back"),t.qZA(),t.TgZ(23,"button",7),t.NdJ("click",function(){return o.onReset()}),t._uU(24,"Reset"),t.qZA(),t.TgZ(25,"button",8),t.NdJ("click",function(){return o.onSave()}),t._uU(26,"Save"),t.qZA()()()()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(3),t.AsE("",t.lcZ(4,4,o.note.title)," -- ",t.xi3(5,6,o.note.dateTime,"dd/MM/yyyy, HH:mm"),""),t.xp6(22),t.Q6J("disabled",o.form.invalid))},dependencies:[l.ez,l.rS,l.uU,s.QW,s.a8,s.hq,s.dn,s.dk,s.n5,_.c,_.Nt,c.KE,c.hX,c.bx,f.LD,i.UX,i.Fj,i.JJ,i.JL,i.sg,i.u,h.ot,h.lW],styles:["button[_ngcontent-%COMP%]{margin-right:10px}.cardFieldRows[_ngcontent-%COMP%]{display:flex;flex-direction:row}.contents[_ngcontent-%COMP%]{display:flex;flex-direction:column}.formFields[_ngcontent-%COMP%]{margin-top:10px;margin-right:10px}.centered[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.text-style[_ngcontent-%COMP%]{white-space:pre-wrap}#update[_ngcontent-%COMP%]{margin-left:10px}#address[_ngcontent-%COMP%]{width:800px}.button-div[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}"]}),r})()}}]);