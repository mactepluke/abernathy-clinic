"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[597],{9597:(et,Z,i)=>{i.r(Z),i.d(Z,{PatientsPageComponent:()=>K});var C=i(2436),f=i(337),s=i(2396),y=i(9977),D=i(7398),N=i(3019),_=i(2096);class U extends y.o2{constructor(){super()}connect(){if(this.paginator&&this.sort)return(0,N.T)((0,_.of)(this.data),this.paginator.page,this.sort.sortChange).pipe((0,D.U)(()=>this.getPagedData(this.getSortedData([...this.data]))));throw Error("Please set the paginator and sort on the data source before connecting.")}disconnect(){}getPagedData(a){return this.paginator?a.splice(this.paginator.pageIndex*this.paginator.pageSize,this.paginator.pageSize):a}getSortedData(a){return this.sort&&this.sort.active&&""!==this.sort.direction?a.sort((n,o)=>{const l="desc"===this.sort?.direction;switch(this.sort?.active){case"family":return c(+n.family,+o.family,l);case"given":return c(+n.given,+o.given,l);case"dob":return c(+n.dob,+o.dob,l);case"sex":return c(n.sex,o.sex,l);case"address":return c(+n.address,+o.address,l);case"phone":return c(+n.phone,+o.phone,l);default:return 0}}):a}}function c(e,a,n){return(e<a?-1:1)*(n?1:-1)}var T=i(6814),g=i(210),h=i(9548),m=i(1075),t=i(5879);let S=(()=>{class e{transform(n){return"null"===n||""===n||void 0===n?"\u2013":n}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"nullToDash",type:e,pure:!0,standalone:!0}),e})();var P=i(4692),F=i(1896);function Y(e,a){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Family Name"),t.qZA())}function w(e,a){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.Oqu(n.family)}}function M(e,a){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Given Name"),t.qZA())}function O(e,a){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.Oqu(n.given)}}function q(e,a){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Date of Birth"),t.qZA())}function Q(e,a){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,n.dob,"dd/MM/yyyy"))}}function R(e,a){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Sex"),t.qZA())}function B(e,a){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.Oqu(n.sex)}}function J(e,a){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Address"),t.qZA())}function G(e,a){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.ALo(2,"nullToDash"),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,n.address))}}function I(e,a){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Phone"),t.qZA())}function k(e,a){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.ALo(2,"nullToDash"),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,n.phone))}}function z(e,a){1&e&&(t.TgZ(0,"th",18),t._uU(1,"Action"),t.qZA())}function j(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"td",17)(1,"button",19),t.NdJ("click",function(){const b=t.CHM(n).$implicit,tt=t.oxw();return t.KtG(tt.viewPatient(b.family,b.given))}),t.TgZ(2,"mat-icon"),t._uU(3,"open_in_new"),t.qZA()()()}}function H(e,a){1&e&&t._UZ(0,"tr",20)}function $(e,a){1&e&&t._UZ(0,"tr",21)}const E=function(){return[5,10,20]};let X=(()=>{class e{constructor(n,o){this.patientService=n,this.router=o,this.displayedColumns=["family","given","dob","sex","address","phone","action"],this.dataSource=new U}ngAfterViewInit(){this.patientService.findPatients().subscribe(n=>{this.dataSource.data=n,this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.table.dataSource=this.dataSource})}viewPatient(n,o){this.router.navigate(["mediscreen-abernathy/patient-record",n,o])}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(g.e),t.Y36(F.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-patients-table"]],viewQuery:function(n,o){if(1&n&&(t.Gf(C.NW,5),t.Gf(f.YE,5),t.Gf(s.BZ,5)),2&n){let l;t.iGM(l=t.CRH())&&(o.paginator=l.first),t.iGM(l=t.CRH())&&(o.sort=l.first),t.iGM(l=t.CRH())&&(o.table=l.first)}},standalone:!0,features:[t._Bn([g.e]),t.jDz],decls:27,vars:7,consts:[[1,"mat-elevation-z8"],["mat-table","","matSortActive","family","matSortDisableClear","","matSortDirection","asc","matSort","","aria-label","Elements",1,"full-width-table"],["matColumnDef","family"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","given"],["matColumnDef","dob"],["matColumnDef","sex"],["matColumnDef","address"],["matColumnDef","phone"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions"],["paginator",""],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","",1,"button",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"table",1),t.ynx(2,2),t.YNc(3,Y,2,0,"th",3),t.YNc(4,w,2,1,"td",4),t.BQk(),t.ynx(5,5),t.YNc(6,M,2,0,"th",3),t.YNc(7,O,2,1,"td",4),t.BQk(),t.ynx(8,6),t.YNc(9,q,2,0,"th",3),t.YNc(10,Q,3,4,"td",4),t.BQk(),t.ynx(11,7),t.YNc(12,R,2,0,"th",3),t.YNc(13,B,2,1,"td",4),t.BQk(),t.ynx(14,8),t.YNc(15,J,2,0,"th",3),t.YNc(16,G,3,3,"td",4),t.BQk(),t.ynx(17,9),t.YNc(18,I,2,0,"th",3),t.YNc(19,k,3,3,"td",4),t.BQk(),t.ynx(20,10),t.YNc(21,z,2,0,"th",11),t.YNc(22,j,4,0,"td",4),t.BQk(),t.YNc(23,H,1,0,"tr",12),t.YNc(24,$,1,0,"tr",13),t.qZA(),t._UZ(25,"mat-paginator",14,15),t.qZA()),2&n&&(t.xp6(23),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",null==o.dataSource||null==o.dataSource.data?null:o.dataSource.data.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",t.DdM(6,E)))},dependencies:[C.TU,C.NW,s.p0,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,f.JX,f.YE,f.nU,T.uU,h.c,m.ot,m.RK,S,P.Ps,P.Hw],styles:[".full-width-table[_ngcontent-%COMP%]{width:100%}"]}),e})();var d=i(8189),r=i(6223),p=i(6005),u=i(4378),v=i(6611),x=i(4744),L=i(6649);function W(e,a){if(1&e&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.Q6J("value",n.value),t.xp6(1),t.hij(" ",n.viewValue," ")}}let V=(()=>{class e{constructor(n,o,l){this.dialogRef=n,this.formBuilder=o,this.patientRecordService=l,this.sexes=[{value:"M",viewValue:"Male"},{value:"F",viewValue:"Female"}]}ngOnInit(){this.form=this.patientRecordService.createPatientForm()}onNoClick(){this.dialogRef.close()}onAdd(){this.dialogRef.close(this.form.value)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(d.so),t.Y36(r.qu),t.Y36(x.k))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-patient-dialog"]],standalone:!0,features:[t._Bn([u.FA,x.k]),t.jDz],decls:41,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"dialogContents",3,"formGroup"],[1,"dialogFieldRows"],[1,"leftFormFields"],["matInput","","formControlName","family"],[1,"rightFormFields"],["matInput","","formControlName","given"],["id","sex",1,"leftFormFields"],["formControlName","sex"],[3,"value",4,"ngFor","ngForOf"],["id","dob",1,"rightFormFields"],["matInput","","formControlName","dob",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],["id","address",1,"leftFormFields"],["matInput","","formControlName","address"],["id","phone",1,"rightFormFields"],["matInput","","formControlName","phone"],["mat-dialog-actions","",1,"centered"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(n,o){if(1&n&&(t.TgZ(0,"h1",0),t._uU(1,"New patient"),t.qZA(),t.TgZ(2,"div",1)(3,"div",2)(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Family Name"),t.qZA(),t._UZ(7,"input",4),t.qZA(),t.TgZ(8,"mat-form-field",5)(9,"mat-label"),t._uU(10,"Given Name"),t.qZA(),t._UZ(11,"input",6),t.qZA()(),t.TgZ(12,"div",2)(13,"mat-form-field",7)(14,"mat-label"),t._uU(15,"Sex"),t.qZA(),t.TgZ(16,"mat-select",8),t.YNc(17,W,2,2,"mat-option",9),t.qZA()(),t.TgZ(18,"mat-form-field",10)(19,"mat-label"),t._uU(20,"Date of Birth"),t.qZA(),t._UZ(21,"input",11),t.TgZ(22,"mat-hint"),t._uU(23,"MM/DD/YYYY"),t.qZA(),t._UZ(24,"mat-datepicker-toggle",12)(25,"mat-datepicker",null,13),t.qZA()(),t.TgZ(27,"div",2)(28,"mat-form-field",14)(29,"mat-label"),t._uU(30,"Address"),t.qZA(),t._UZ(31,"input",15),t.qZA(),t.TgZ(32,"mat-form-field",16)(33,"mat-label"),t._uU(34,"Phone"),t.qZA(),t._UZ(35,"input",17),t.qZA()()(),t.TgZ(36,"div",18)(37,"button",19),t.NdJ("click",function(){return o.onNoClick()}),t._uU(38,"Cancel"),t.qZA(),t.TgZ(39,"button",20),t.NdJ("click",function(){return o.onAdd()}),t._uU(40,"Add"),t.qZA()()),2&n){const l=t.MAs(26);t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(15),t.Q6J("ngForOf",o.sexes),t.xp6(4),t.Q6J("matDatepicker",l),t.xp6(3),t.Q6J("for",l),t.xp6(15),t.Q6J("disabled",o.form.invalid)}},dependencies:[T.ez,T.sg,p.lN,p.KE,p.hX,p.bx,p.R9,h.c,h.Nt,r.u5,r.Fj,r.JJ,r.JL,m.ot,m.lW,d.Is,d.uh,d.xY,d.H8,r.UX,r.sg,r.u,u.FA,u.Mq,u.hl,u.nW,v.LD,v.gD,L.ey],styles:[".dialogFieldRows[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.dialogContents[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column}.leftFormFields[_ngcontent-%COMP%]{margin-right:10px}.rightFormFields[_ngcontent-%COMP%]{margin-left:10px}.centered[_ngcontent-%COMP%]{display:flex;justify-content:center}#sex[_ngcontent-%COMP%]{width:50%}#dob[_ngcontent-%COMP%]{width:150%}#address[_ngcontent-%COMP%]{width:140%}#phone[_ngcontent-%COMP%]{width:60%}"]}),e})();var A=i(9799);let K=(()=>{class e{constructor(n,o,l){this.dialog=n,this.patientService=o,this.displayService=l}addPatient(){this.dialog.open(V).afterClosed().subscribe(o=>{this.patient=o,this.patientService.addPatient(this.patient).subscribe({next:()=>{console.log("Patient added successfully"),this.displayService.openSnackBar("Patient added successfully"),window.location.reload()},error:()=>{this.displayService.openSnackBar("Error: could not add patient")}})})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(d.uw),t.Y36(g.e),t.Y36(A.G))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-patients"]],standalone:!0,features:[t._Bn([g.e,A.G]),t.jDz],decls:4,vars:0,consts:[[1,"button-container"],["mat-raised-button","","color","primary",1,"button",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return o.addPatient()}),t._uU(2," Add patient "),t.qZA()(),t._UZ(3,"app-patients-table"))},dependencies:[X,p.lN,h.c,r.u5,m.ot,m.lW,d.Is],styles:[".button-container[_ngcontent-%COMP%]{padding-top:12px;padding-bottom:12px}.button[_ngcontent-%COMP%]{margin-left:8px}mat-spinner[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-top:20%}"]}),e})()}}]);